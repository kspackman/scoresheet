(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7945eacb"],{"0753":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VDialog",{attrs:{width:e.mode===e.Modes.PLAY?"300px":"unset"},on:{input:function(t){return e.$emit("input",t)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[[e.mode===e.Modes.PLAY?a("CreatePlayDialogPlay",{on:{cancel:e.closeDialog,"create-play":e.switchMode}}):a("CreatePlayDialogRounds",{attrs:{game:e.game,"play-info":e.playInfo},on:{cancel:e.closeDialog,"create-play":e.createPlay}})]],2)},l=[],r=(a("4de4"),a("d81d"),a("2909")),s=a("5530"),c=a("2f62"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VCard",{attrs:{width:"300px"}},[a("VCardTitle",[e._v("Create a Play")]),a("VForm",{ref:"form",staticClass:"px-4 pb-4",on:{submit:e.createPlay},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("VTextField",{ref:"playName",attrs:{label:"Play name",counter:30,maxlength:"30",required:"",autofocus:"",rules:e.nameRules},model:{value:e.play.name,callback:function(t){e.$set(e.play,"name",t)},expression:"play.name"}}),a("VSelect",{attrs:{items:e.players,label:"Players","item-text":"name","item-value":"id",multiple:"",rules:e.playersRules},model:{value:e.play.playerIds,callback:function(t){e.$set(e.play,"playerIds",t)},expression:"play.playerIds"}}),a("VCard-actions",{staticClass:"justify-end"},[a("VBtn",{attrs:{text:"",color:"primary"},on:{click:e.cancel}},[e._v(" Cancel ")]),a("VBtn",{attrs:{disabled:!e.valid,color:"primary"},on:{click:e.createPlay}},[e._v(" Next ")])],1)],1)],1)},i=[],u=(a("a9e3"),a("25eb"),{data:function(){return{valid:!1,play:{name:"",playerIds:[]},nameRules:[function(e){return!!e||"Play name is required"},function(e){return e&&e.length<=30||"Play name must be less than 30 characters"}],playersRules:[function(e){return e&&e.length>0||"At least one player must be selected"}]}},computed:Object(s["a"])({},Object(c["c"])(["players"])),methods:{cancel:function(){this.$emit("cancel")},createPlay:function(){this.play.playerIds=this.play.playerIds.map((function(e){return Number.parseInt(e,10)})),this.$emit("create-play",this.play)}}}),d=u,p=a("2877"),y=a("6544"),m=a.n(y),f=a("8336"),h=a("b0af"),b=a("99d9"),v=a("4bd4"),g=a("b974"),P=a("8654"),x=Object(p["a"])(d,o,i,!1,null,null,null),V=x.exports;m()(x,{VBtn:f["a"],VCard:h["a"],VCardActions:b["b"],VCardTitle:b["e"],VForm:v["a"],VSelect:g["a"],VTextField:P["a"]});var I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("VCard",[a("VSimpleTable",[a("thead",[a("tr",[a("th"),e._l(e.selectedPlayers,(function(t){return a("th",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))],2)]),a("tbody",[e._l(e.game.rounds,(function(t,n){return a("tr",{key:t.name},[a("th",[e._v(" "+e._s(t.name)+" ")]),e._l(e.selectedPlayers,(function(t,l){return a("td",{key:t.id,staticClass:"input-td"},[a("div",[a("VTextField",{attrs:{type:"number",dense:""},on:{input:function(t){return e.calculateTotal(e.playerScores[l])}},model:{value:e.playerScores[l].scores[n],callback:function(t){e.$set(e.playerScores[l].scores,n,e._n(t))},expression:"playerScores[playerIndex].scores[roundIndex]"}})],1)])}))],2)})),a("tr",[a("th",[e._v("Total")]),e._l(e.selectedPlayers,(function(t,n){return a("td",{key:t.id,staticClass:"input-td"},[e._v(" "+e._s(e.playerScores[n].total)+" ")])}))],2)],2)]),a("VCardActions",{staticClass:"justify-end"},[a("VBtn",{attrs:{text:"",color:"primary"},on:{click:e.cancel}},[e._v(" Cancel ")]),a("VBtn",{attrs:{color:"primary"},on:{click:e.createPlay}},[e._v(" Done ")])],1)],1)},_=[],C=(a("cb29"),a("7db0"),a("4160"),a("13d5"),a("159b"),{props:{game:{type:Object,required:!0},playInfo:{type:Object,required:!0}},data:function(){return{playerScores:[]}},computed:Object(s["a"])({selectedPlayers:function(){var e=this;return this.playInfo.playerIds.map((function(t){return e.players.find((function(e){return e.id===t}))}))}},Object(c["c"])(["players"])),created:function(){var e=this;this.playerScores=[],console.log(this.game.rounds.length-1),this.playInfo.playerIds.forEach((function(t,a){e.$set(e.playerScores,a,{playerId:t,scores:new Array(e.game.rounds.length).fill(0),total:0})}))},methods:{calculateTotal:function(e){e.total=e.scores.reduce((function(e,t){return e+t}))},cancel:function(){this.$emit("cancel")},createPlay:function(){this.$emit("create-play",this.playerScores)}}}),w=C,D=(a("befa"),a("1f4f")),S=Object(p["a"])(w,I,_,!1,null,"e11cd7b8",null),O=S.exports;m()(S,{VBtn:f["a"],VCard:h["a"],VCardActions:b["b"],VSimpleTable:D["a"],VTextField:P["a"]});var j={PLAY:"PLAY",ROUNDS:"ROUNDS"},k={props:{value:{type:Boolean,required:!0},game:{type:Object,required:!0}},components:{CreatePlayDialogPlay:V,CreatePlayDialogRounds:O},data:function(){return{showDialog:!1,mode:j.PLAY,Modes:j,playInfo:null}},computed:Object(s["a"])({},Object(c["b"])(["nextPlayId"])),methods:{closeDialog:function(){this.$emit("input",!1),this.playInfo=null,this.mode=j.PLAY},switchMode:function(e){this.playInfo=e,this.mode=j.ROUNDS},createPlay:function(e){var t=e.map((function(e){return e.total})),a=this.game.lowScoreWins?Math.min.apply(Math,Object(r["a"])(t)):Math.max.apply(Math,Object(r["a"])(t)),n=e.filter((function(e){return e.total===a})).map((function(e){return e.playerId}));this.$emit("create-play",{id:this.nextPlayId,gameId:this.game.id,players:e,winners:n,date:new Date}),this.closeDialog()}},watch:{value:{handler:function(e){this.showDialog=e},immediate:!0}}},$=k,A=a("169a"),T=Object(p["a"])($,n,l,!1,null,null,null);t["default"]=T.exports;m()(T,{VDialog:A["a"]})},"08ff":function(e,t,a){},"25eb":function(e,t,a){var n=a("23e7"),l=a("c20d");n({target:"Number",stat:!0,forced:Number.parseInt!=l},{parseInt:l})},befa:function(e,t,a){"use strict";var n=a("08ff"),l=a.n(n);l.a},c20d:function(e,t,a){var n=a("da84"),l=a("58a8").trim,r=a("5899"),s=n.parseInt,c=/^[+-]?0[Xx]/,o=8!==s(r+"08")||22!==s(r+"0x16");e.exports=o?function(e,t){var a=l(String(e));return s(a,t>>>0||(c.test(a)?16:10))}:s}}]);
//# sourceMappingURL=chunk-7945eacb.a9066238.js.map